var wingaru=wingaru||{};wingaru.config=function(){function n(){return t}function e(n){t=n}console.log("Wingaru Config Loaded");var t="http://dev-api.wingaru.com.au/";return{getApiUrl:n,setApiUrl:e}}(),wingaru.util=function(){function n(n){window.localStorage["wingaru.token"]=n}function e(){return window.localStorage["wingaru.token"]}return console.log("Wingaru Util Loaded"),{setToken:n,getToken:e}}(),wingaru.auth=function(){function n(n){wingaru.api.request("POST","global/authenticate",{email:"user@wingaru.com.au",password:"wingaru"}).done(function(e){wingaru.util.setToken(e.token),n.apply(null)})}function e(){return!0}function t(){wingaru.api.requestWithToken("GET","global/profile").done(function(n){console.log(n)})}return console.log("Wingaru Auth Loaded"),{login:n,isAuthed:e,getUser:t}}(),wingaru.api=function(){function n(n,e,t){return $.ajax({method:n||"GET",data:t||{},url:wingaru.config.getApiUrl()+e,dataType:"json"})}function e(n,e,t){return $.ajax({method:n||"GET",data:t||{},url:wingaru.config.getApiUrl()+e,headers:{"X-Request-Token":wingaru.util.getToken()},dataType:"json"})}function t(n){function e(e){return wingaru.api.requestWithToken("GET",n,e||{})}return{all:e,first:function(n){},create:function(n){},update:function(n,e){},remove:function(n){},setField:function(){}}}return console.log("Wingaru API Loaded"),{request:n,requestWithToken:e,createResource:t}}(),wingaru.games=function(){function n(n){v=document.createElement("iframe"),v.style.width="100%",v.style.height="100%",v.style.display="none",v.style.borderWidth="0px",v.style.display="block",document.getElementById(n||k.containerId).appendChild(v)}function e(n,e){return credentials}function t(n,e,t){return!0}function o(n,e,t,o,a){if(y[n]={gameId:n,assignmentId:e,uri:t,startState:o,div:a},void 0!=typeof v){document.getElementById(k.logId).innerHTML=n;var i=k.s3Url+n+"/index.html";return v.src=i,k.containerId}}function a(n){return{title:"My Game"}}function i(n){return{score:"98"}}function r(n){return[{name:"John Doe",score:"98"}]}function u(n,e){return{score:"98"}}function c(n,e){return[{score:"98"}]}function l(n,e){callbacks[n]=e}function s(n,e){}function g(){return"object"==typeof window.top.wingaru}function d(n,e,t,o){callbacks[n].apply(this,[e,t,o])}function f(n,e,t){var o=y[n];callbacks.started(o),g()&&window.top.wingaru.games.callEvent("started",n,e,t)}function w(n,e,t){y[n];callbacks.leveled(),g()&&window.top.wingaru.games.callEvent("leveled",n,e,t)}function p(n,e,t){y[n];callbacks.completed(),g()&&window.top.wingaru.games.callEvent("completed",n,e,t)}function m(n,e,t){y[n];callbacks.flash(),g()&&window.top.wingaru.games.callEvent("flash",n,e,t)}function h(n,e,t){y[n];callbacks.achieved(),g()&&window.top.wingaru.games.callEvent("achieved",n,e,t)}console.log("Wingaru Game Loaded");var v,k={s3Url:"http://s3-ap-southeast-2.amazonaws.com/demos.wingaru.com.au/",localUrl:"http://localhost:9000/games/",containerId:"wingaru-container",logId:"wingaru-log"},y={};return callbacks={started:function(){},leveled:function(){},completed:function(){},flash:function(){},achieved:function(){}},{add:o,getKey:e,setKey:t,getConfig:a,setEvent:l,callEvent:d,setDimension:s,createFrame:n,getHighScore:i,getLeaderBoard:r,getMyHighScore:u,getMyPreviousScores:c,on:{callStarted:f,callLeveled:w,callCompleted:p,callFlash:m,callAchieved:h}}}();