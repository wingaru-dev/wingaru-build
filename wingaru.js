var wingaru=wingaru||{};wingaru.config=function(){function n(){return t}function e(n){t=n}console.log("Wingaru Config Loaded");var t="http://dev-api.wingaru.com.au/";return{getApiUrl:n,setApiUrl:e}}(),wingaru.util=function(){function n(n){window.localStorage["wingaru.token"]=n}function e(){return window.localStorage["wingaru.token"]}return console.log("Wingaru Util Loaded"),{setToken:n,getToken:e}}(),wingaru.auth=function(){function n(n){wingaru.api.request("POST","global/authenticate",{email:"user@wingaru.com.au",password:"wingaru"}).done(function(e){wingaru.util.setToken(e.token),n.apply(null)})}function e(){return!0}function t(){wingaru.api.requestWithToken("GET","global/profile").done(function(n){console.log(n)})}return console.log("Wingaru Auth Loaded"),{login:n,isAuthed:e,getUser:t}}(),wingaru.api=function(){function n(n,e,t){return $.ajax({method:n||"GET",data:t||{},url:wingaru.config.getApiUrl()+e,dataType:"json"})}function e(n,e,t){return $.ajax({method:n||"GET",data:t||{},url:wingaru.config.getApiUrl()+e,headers:{"X-Request-Token":wingaru.util.getToken()},dataType:"json"})}function t(n){function e(e){return wingaru.api.requestWithToken("GET",n,e||{})}return{all:e,first:function(n){},create:function(n){},update:function(n,e){},remove:function(n){},setField:function(){}}}return console.log("Wingaru API Loaded"),{request:n,requestWithToken:e,createResource:t}}(),wingaru.games=function(){function n(n){k=document.createElement("iframe"),k.style.width="100%",k.style.height="100%",k.style.display="none",k.style.borderWidth="0px",k.style.display="block",document.getElementById(n||T.containerId).appendChild(k)}function e(n,e){return credentials}function t(n,e,t){return!0}function o(n,e,t,o,a){if(E[n]={gameId:n,assignmentId:e,uri:t,startState:o,div:T.containerId,config:{}},void 0!=typeof k){document.getElementById(T.logId).innerHTML=n;var i=T.s3Url+n+"/index.html";return k.src=i,T.containerId}}function a(n){return"object"==typeof E[n]?E[n]:void console.log("Game Not Found")}function i(n){return{score:"98"}}function r(n){return[{name:"John Doe",score:"98"}]}function u(n,e){return{score:"98"}}function c(n,e){return[{score:"98"}]}function l(n,e){e.apply(this,[wingaru.games.getConfig(n)])}function g(n,e){callbacks[n]=e}function s(n,e){}function d(){return"object"==typeof window.top.wingaru}function f(){$args=Array.prototype.slice.call(arguments),$name=$args.shift(),callbacks[$name].apply(this,$args)}function w(n,e,t){var o=E[n];callbacks.started(o),d()&&window.top.wingaru.games.callEvent("started",n,e,t)}function p(n,e,t){E[n];callbacks.leveled(),d()&&window.top.wingaru.games.callEvent("leveled",n,e,t)}function m(n,e,t){E[n];callbacks.completed(),d()&&window.top.wingaru.games.callEvent("completed",n,e,t)}function h(n,e){callbacks.flash(),d()&&window.top.wingaru.games.callEvent("flash",n,e)}function v(n,e,t){E[n];callbacks.achieved(),d()&&window.top.wingaru.games.callEvent("achieved",n,e,t)}function y(n,e){d()&&window.top.wingaru.games.callEvent("initialized",n,e)}console.log("Wingaru Game Loaded");var k,T={s3Url:"http://s3-ap-southeast-2.amazonaws.com/demos.wingaru.com.au/",localUrl:"http://localhost:9000/games/",containerId:"wingaru-container",logId:"wingaru-log"},E={};return callbacks={initialized:l,started:function(){},leveled:function(){},completed:function(){},flash:function(){},achieved:function(){}},{add:o,getKey:e,setKey:t,getConfig:a,setEvent:g,callEvent:f,setDimension:s,createFrame:n,getHighScore:i,getLeaderBoard:r,getMyHighScore:u,getMyPreviousScores:c,on:{callInitialized:y,callStarted:w,callLeveled:p,callCompleted:m,callFlash:h,callAchieved:v}}}();