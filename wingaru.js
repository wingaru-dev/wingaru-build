var wingaru=wingaru||{};wingaru.config=function(){return console.log("Wingaru Config Loaded"),{apiUrl:"http://dev-api.wingaru.com.au/"}}(),wingaru.util=function(){function n(n){window.localStorage["wingaru.token"]=n}function e(){return window.localStorage["wingaru.token"]}return console.log("Wingaru Util Loaded"),{setToken:n,getToken:e}}(),wingaru.auth=function(){function n(n){wingaru.api.request("POST","global/authenticate",{email:"user@wingaru.com.au",password:"wingaru"}).done(function(e){wingaru.util.setToken(e.token),n.apply(null)})}function e(){return!0}function t(){wingaru.api.requestWithToken("GET","global/profile").done(function(n){console.log(n)})}return console.log("Wingaru Auth Loaded"),{login:n,isAuthed:e,getUser:t}}(),wingaru.api=function(){function n(n,e,t){return $.ajax({method:n||"GET",data:t||{},url:wingaru.config.apiUrl+e,dataType:"json"})}function e(n,e,t){return $.ajax({method:n||"GET",data:t||{},url:wingaru.config.apiUrl+e,headers:{"X-Request-Token":wingaru.util.getToken()},dataType:"json"})}return console.log("Wingaru API Loaded"),{request:n,requestWithToken:e}}(),wingaru.games=function(){function n(){m=document.createElement("iframe"),m.style.width="100%",m.style.height="100%",m.style.display="none",m.style.borderWidth="0px",m.style.display="block",document.getElementById(p.containerId).appendChild(m)}function e(n,e){return credentials}function t(n,e,t){return window.local,!0}function o(n,e,t,o,a){if(k[n]={gameId:n,assignmentId:e,uri:t,startState:o,div:a},void 0!=typeof m){document.getElementById(p.logId).innerHTML=n;var i=p.s3Url+n+"/index.html";return m.src=i,p.containerId}}function a(n){return{title:"My Game"}}function i(n){return{score:"98"}}function r(n){return[{name:"John Doe",score:"98"}]}function u(n,e){return{score:"98"}}function c(n,e){return[{score:"98"}]}function l(n,e){callbacks[n]=e}function d(n,e){}function s(n,e,t){var o=k[n];callbacks.started(o)}function g(n,e,t){callbacks.leveled()}function f(n,e,t){callbacks.completed()}function w(n,e,t){callbacks.flash()}function h(n,e,t){callbacks.achieved()}console.log("Wingaru Game Loaded");var m,p={s3Url:"http://s3-ap-southeast-2.amazonaws.com/demos.wingaru.com.au/",localUrl:"http://localhost:9000/games/",containerId:"wingaru-container",logId:"wingaru-log"},k={};return callbacks={started:function(){},leveled:function(){},completed:function(){},flash:function(){},achieved:function(){}},{add:o,getKey:e,setKey:t,getConfig:a,setEvent:l,setDimension:d,createFrame:n,getHighScore:i,getLeaderBoard:r,getMyHighScore:u,getMyPreviousScores:c,on:{callStarted:s,callLeveled:g,callCompleted:f,callFlash:w,callAchieved:h}}}();